"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[5959],{8250(e,n,a){a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"module-1-ros-fundamentals/launch-params","title":"ROS 2 Launch Files and Parameter Management","description":"Launch files and parameter management are essential for configuring and starting complex robotic systems in ROS 2. This section covers how to create launch files and manage parameters effectively.","source":"@site/docs/module-1-ros-fundamentals/launch-params.md","sourceDirName":"module-1-ros-fundamentals","slug":"/module-1-ros-fundamentals/launch-params","permalink":"/physical-ai-humanoid-robotics-book/docs/module-1-ros-fundamentals/launch-params","draft":false,"unlisted":false,"editUrl":"https://github.com/your-organization/physical-ai-humanoid-robotics-book/edit/main/book/docs/module-1-ros-fundamentals/launch-params.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8}}');var i=a(4848),t=a(8453);const s={sidebar_position:8},o="ROS 2 Launch Files and Parameter Management",l={},c=[{value:"Launch Files",id:"launch-files",level:2},{value:"Basic Launch File Structure",id:"basic-launch-file-structure",level:3},{value:"Launch File Actions",id:"launch-file-actions",level:3},{value:"Node Action",id:"node-action",level:4},{value:"Conditional Launch",id:"conditional-launch",level:4},{value:"Execute Process",id:"execute-process",level:4},{value:"Launch Arguments",id:"launch-arguments",level:3},{value:"Parameter Management",id:"parameter-management",level:2},{value:"Parameter Declaration",id:"parameter-declaration",level:3},{value:"Parameter Files (YAML)",id:"parameter-files-yaml",level:3},{value:"Setting Parameters at Runtime",id:"setting-parameters-at-runtime",level:3},{value:"In Launch Files",id:"in-launch-files",level:4},{value:"Command Line",id:"command-line",level:4},{value:"Using ros2 param Command",id:"using-ros2-param-command",level:4},{value:"Advanced Launch Features",id:"advanced-launch-features",level:2},{value:"Substitutions",id:"substitutions",level:3},{value:"Event Handlers",id:"event-handlers",level:3},{value:"Launch File Best Practices",id:"launch-file-best-practices",level:2},{value:"Example: Complete Launch File for Humanoid Robot",id:"example-complete-launch-file-for-humanoid-robot",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"ros-2-launch-files-and-parameter-management",children:"ROS 2 Launch Files and Parameter Management"})}),"\n",(0,i.jsx)(n.p,{children:"Launch files and parameter management are essential for configuring and starting complex robotic systems in ROS 2. This section covers how to create launch files and manage parameters effectively."}),"\n",(0,i.jsx)(n.h2,{id:"launch-files",children:"Launch Files"}),"\n",(0,i.jsxs)(n.p,{children:["Launch files allow you to start multiple nodes with specific configurations simultaneously. They are written in Python using the ",(0,i.jsx)(n.code,{children:"launch"})," package."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-launch-file-structure",children:"Basic Launch File Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\n\ndef generate_launch_description():\n    # Define launch arguments\n    param_file = LaunchConfiguration('param_file')\n    \n    # Declare launch arguments\n    param_file_arg = DeclareLaunchArgument(\n        'param_file',\n        default_value='path/to/params.yaml',\n        description='Path to parameter file'\n    )\n    \n    # Define nodes\n    talker_node = Node(\n        package='demo_nodes_cpp',\n        executable='talker',\n        name='talker_node',\n        parameters=[param_file],\n        remappings=[\n            ('chatter', 'custom_chatter')\n        ]\n    )\n    \n    listener_node = Node(\n        package='demo_nodes_cpp',\n        executable='listener',\n        name='listener_node',\n        parameters=[param_file]\n    )\n    \n    # Return launch description\n    return LaunchDescription([\n        param_file_arg,\n        talker_node,\n        listener_node\n    ])\n"})}),"\n",(0,i.jsx)(n.h3,{id:"launch-file-actions",children:"Launch File Actions"}),"\n",(0,i.jsx)(n.p,{children:"Launch files support various actions:"}),"\n",(0,i.jsx)(n.h4,{id:"node-action",children:"Node Action"}),"\n",(0,i.jsx)(n.p,{children:"The primary action for starting ROS 2 nodes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch_ros.actions import Node\n\nmy_node = Node(\n    package='my_package',\n    executable='my_node_executable',  # or name='my_node' for default executable\n    name='custom_node_name',\n    parameters=[\n        {'param1': 'value1'},\n        '/path/to/params.yaml'\n    ],\n    remappings=[\n        ('original_topic', 'new_topic'),\n        ('original_service', 'new_service')\n    ],\n    arguments=['arg1', 'arg2'],\n    output='screen'  # Output to screen instead of log file\n)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"conditional-launch",children:"Conditional Launch"}),"\n",(0,i.jsx)(n.p,{children:"Execute actions based on conditions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch.conditions import IfCondition\nfrom launch.substitutions import LaunchConfiguration\n\nuse_sim_time = LaunchConfiguration('use_sim_time')\n\nsim_node = Node(\n    condition=IfCondition(use_sim_time),\n    package='gazebo_ros',\n    executable='gazebo'\n)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"execute-process",children:"Execute Process"}),"\n",(0,i.jsx)(n.p,{children:"Run non-ROS executables:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch.actions import ExecuteProcess\n\nrviz = ExecuteProcess(\n    cmd=['rviz2', '-d', '/path/to/config.rviz'],\n    output='screen'\n)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"launch-arguments",children:"Launch Arguments"}),"\n",(0,i.jsx)(n.p,{children:"Launch arguments allow passing values to launch files:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\n\n# Declare argument\nsim_time_arg = DeclareLaunchArgument(\n    'use_sim_time',\n    default_value='false',\n    description='Use simulation time'\n)\n\n# Use argument\nuse_sim_time = LaunchConfiguration('use_sim_time')\n\n# In node definition\nnode = Node(\n    package='my_package',\n    executable='my_node',\n    parameters=[{'use_sim_time': use_sim_time}]\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"parameter-management",children:"Parameter Management"}),"\n",(0,i.jsx)(n.p,{children:"Parameters allow runtime configuration of nodes without recompilation."}),"\n",(0,i.jsx)(n.h3,{id:"parameter-declaration",children:"Parameter Declaration"}),"\n",(0,i.jsx)(n.p,{children:"In your node, declare parameters with default values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class ParameterNode(Node):\n    def __init__(self):\n        super().__init__('parameter_node')\n        \n        # Declare parameters with default values\n        self.declare_parameter('param_name', 'default_value')\n        self.declare_parameter('threshold', 0.5)\n        self.declare_parameter('debug_mode', False)\n        \n        # Get parameter values\n        self.param_value = self.get_parameter('param_name').value\n        self.threshold = self.get_parameter('threshold').value\n        self.debug_mode = self.get_parameter('debug_mode').value\n"})}),"\n",(0,i.jsx)(n.h3,{id:"parameter-files-yaml",children:"Parameter Files (YAML)"}),"\n",(0,i.jsx)(n.p,{children:"Parameters can be defined in YAML files:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# params.yaml\n/**:  # Applies to all nodes\n  ros__parameters:\n    use_sim_time: false\n    log_level: 'info'\n\nmy_node:  # Applies to specific node\n  ros__parameters:\n    frequency: 10.0\n    topic_name: 'chatter'\n    thresholds:\n      min: 0.1\n      max: 10.0\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setting-parameters-at-runtime",children:"Setting Parameters at Runtime"}),"\n",(0,i.jsx)(n.p,{children:"Parameters can be set in various ways:"}),"\n",(0,i.jsx)(n.h4,{id:"in-launch-files",children:"In Launch Files"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"my_node = Node(\n    package='my_package',\n    executable='my_node',\n    parameters=[\n        {'param1': 'value1'},\n        {'param2': 42.0},\n        '/path/to/params.yaml'\n    ]\n)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"command-line",children:"Command Line"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Set parameter when running node\nros2 run my_package my_node --ros-args --param param_name:=value\n\n# Load parameters from file\nros2 run my_package my_node --ros-args --params-file params.yaml\n"})}),"\n",(0,i.jsx)(n.h4,{id:"using-ros2-param-command",children:"Using ros2 param Command"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# List parameters of a node\nros2 param list /node_name\n\n# Get parameter value\nros2 param get /node_name param_name\n\n# Set parameter value\nros2 param set /node_name param_name new_value\n\n# Load parameters from file\nros2 param load /node_name params.yaml\n\n# Dump parameters to file\nros2 param dump /node_name\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-launch-features",children:"Advanced Launch Features"}),"\n",(0,i.jsx)(n.h3,{id:"substitutions",children:"Substitutions"}),"\n",(0,i.jsx)(n.p,{children:"Launch files support various substitutions for dynamic values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch.substitutions import TextSubstitution, PathJoinSubstitution\nfrom launch_ros.substitutions import FindPackageShare\n\n# Combine paths\nconfig_path = PathJoinSubstitution([\n    FindPackageShare('my_package'),\n    'config',\n    'my_config.yaml'\n])\n\n# Direct text\ndirect_text = TextSubstitution(text='my_value')\n\n# In node definition\nnode = Node(\n    package='my_package',\n    executable='my_node',\n    parameters=[config_path]\n)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"event-handlers",children:"Event Handlers"}),"\n",(0,i.jsx)(n.p,{children:"Handle events during launch execution:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch.event_handlers import OnProcessStart, OnProcessExit\nfrom launch.actions import RegisterEventHandler\n\n# Register an event handler\nlaunch_description = LaunchDescription([\n    my_node,\n    RegisterEventHandler(\n        OnProcessStart(\n            target_action=my_node,\n            on_start=[\n                # Actions to perform when node starts\n            ]\n        )\n    )\n])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"launch-file-best-practices",children:"Launch File Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Modular design"}),": Break complex systems into multiple launch files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use arguments"}),": Make launch files configurable with launch arguments"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameter files"}),": Use YAML files for complex parameter configurations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Descriptive names"}),": Use clear names for nodes and parameters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Default values"}),": Provide sensible defaults for all arguments"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Documentation"}),": Comment your launch files to explain the purpose of each component"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example-complete-launch-file-for-humanoid-robot",children:"Example: Complete Launch File for Humanoid Robot"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\nfrom launch.substitutions import PathJoinSubstitution\nfrom launch_ros.substitutions import FindPackageShare\n\ndef generate_launch_description():\n    # Launch arguments\n    use_sim_time = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Use simulation time if true'\n    )\n    \n    # Parameters\n    config_file = PathJoinSubstitution([\n        FindPackageShare('humanoid_robot_bringup'),\n        'config',\n        'humanoid_params.yaml'\n    ])\n    \n    # Nodes\n    robot_state_publisher = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        parameters=[\n            config_file,\n            {'use_sim_time': LaunchConfiguration('use_sim_time')}\n        ]\n    )\n    \n    controller_manager = Node(\n        package='controller_manager',\n        executable='ros2_control_node',\n        parameters=[\n            config_file,\n            {'use_sim_time': LaunchConfiguration('use_sim_time')}\n        ]\n    )\n    \n    # Perception nodes\n    camera_driver = Node(\n        package='camera_driver',\n        executable='camera_node',\n        parameters=[config_file],\n        condition=IfCondition(LaunchConfiguration('enable_camera'))\n    )\n    \n    return LaunchDescription([\n        use_sim_time,\n        robot_state_publisher,\n        controller_manager,\n        camera_driver\n    ])\n"})}),"\n",(0,i.jsx)(n.p,{children:"Launch files and parameter management provide powerful tools for configuring and starting complex robotic systems. Understanding these concepts is essential for developing maintainable and configurable ROS 2 applications."})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453(e,n,a){a.d(n,{R:()=>s,x:()=>o});var r=a(6540);const i={},t=r.createContext(i);function s(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);